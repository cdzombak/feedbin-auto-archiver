// Sample configuration for feedbin-auto-archiver
// Ages are specified in days
//
// RULE PRIORITIZATION: When multiple rules apply to a feed, the system uses the 
// MOST AGGRESSIVE values (smallest max_age and keep_n) across all matching rules.

{
  // Global default max_age (overrides --max-age argument)
  "max_age": 30,

  // Rules that apply to specific feed IDs
  "feed_specific": [
    {
      // Use feedbin_archiver.py list-feeds to find feed IDs
      "feed_id": 123,
      "max_age": 7        // Archive after 7 days
    },
    {
      "feed_id": 456,  
      "keep_n": 3         // Keep only 3 most recent entries
    },
    {
      "feed_id": 789,
      "max_age": 14,      // Archive after 14 days OR
      "keep_n": 5         // keep only 5 recent (whichever is more aggressive)
    }
  ],

  // Rules that apply to feeds whose titles match regex patterns
  "title_regex": [
    {
      "title_regex": "Daily",
      "max_age": 3        // Archive daily feeds after 3 days
    },
    {
      "title_regex": "Newsletter", 
      "keep_n": 2         // Keep only 2 recent newsletter entries
    },
    {
      "title_regex": "(Breaking|Alert)",
      "max_age": 1        // Archive breaking news after 1 day  
    }
  ]
}

// Examples of rule combination:
// - Feed ID 123 titled "Daily Newsletter" would use:
//   max_age = min(7, 3) = 3 days, keep_n = 2
// - Feed titled "Breaking Daily News" would use: 
//   max_age = min(30, 1, 3) = 1 day